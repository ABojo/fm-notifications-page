(()=>{"use strict";const e=(()=>{class e{constructor(e){Object.keys(e).forEach((t=>{this[t]=e[t]}))}markAsRead(){this.unread=!1}isUnread(){return this.unread}getId(){return this.id}}let t=[];return{addNotifications:function(a){a.forEach((a=>{const n=new e(a);t.push(n)}))},getNotifications:function(){return t},getNumberOfUnread:function(){return t.reduce(((e,t)=>t.isUnread()?e+1:e),0)},findById:function(e){return t.find((t=>{if(t.id===e)return t}))}}})(),t=function(e,t){const a=document.createElement(e);return Object.keys(t).forEach((e=>{a[e]=t[e]})),a},a=(()=>{const e="notification";return{noti:e,unread:`${e}--unread`,profileImg:`${e}__profile-img`,bodyText:`${e}__message`,name:`${e}__name`,time:`${e}__time`,post:`${e}__post`,group:`${e}__group`,privateMessage:`${e}__pm`,postImage:`${e}__post-img`}})(),n=class{constructor(e){const n=t("li",{className:a.noti});n.setAttribute("data-id",e.id),e.unread&&n.classList.add(a.unread);const s=t("img",{className:a.profileImg,src:e.profileImageUrl,alt:`Picture of ${e.name}`}),o=t("p",{className:a.bodyText}),r=t("span",{className:a.name,textContent:e.name}),i=t("span",{className:a.time,textContent:e.timestamp});n.appendChild(s),n.appendChild(o),n.appendChild(i),o.prepend(r),this.htmlElement=n,this.messageElement=o}getElement(){return this.htmlElement}addToMessage(e){this.messageElement.append(e)}addElement(e){this.getElement().append(e)}},s=class extends n{constructor(e){super(e),this.addToMessage("followed you ")}},o=class extends n{constructor(e){super(e);const n=t("a",{className:a.group,href:e.groupUrl,textContent:e.groupName});e.joined?this.addToMessage("has joined your group "):this.addToMessage("has left your group "),this.addToMessage(n)}},r=class extends n{constructor(e){super(e);const n=t("a",{className:a.post,href:e.postUrl,textContent:e.postTitle});this.addToMessage("reacted to your post "),this.addToMessage(n)}},i=class extends n{constructor(e){super(e);const n=t("img",{className:a.postImage,src:e.postImageUrl});this.addToMessage("commented on your picture "),this.addElement(n)}},d=class extends n{constructor(e){super(e),this.messageText=e.messageText;const n=t("p",{className:a.privateMessage,textContent:e.messageText});this.addToMessage("sent you a private message "),this.addElement(n)}},m=(()=>{const e={follow:s,message:d,comment:i,react:r,group:o};return function(t){return new(0,e[t.type])(t).getElement()}})(),c=((e,t,a)=>function(){const n=e.getNotifications();!function(e){t.addNotifications(e)}(n),function(){const e=t.getNumberOfUnread();a.setUnreadCount(e)}(),a.addMarkAllClickHandler((()=>{t.getNotifications().forEach((e=>{e.unread&&(e.markAsRead(),a.markNotificationAsRead(e.id))})),a.setUnreadCount(0)})),a.addNotiClickHandler((e=>{const n=t.findById(e);n.markAsRead(),a.markNotificationAsRead(n.getId());const s=t.getNumberOfUnread();a.setUnreadCount(s)})),function(e){a.addNotifications(e)}(n)})({getNotifications:function(){return[{id:"1",type:"react",unread:!0,name:"Mark Webber",profileImageUrl:"/images/avatar-mark-webber.webp",timestamp:"1m ago",postTitle:"My first tournament today!",postUrl:"#"},{id:"2",type:"follow",unread:!0,name:"Angela Gray",profileImageUrl:"/images/avatar-angela-gray.webp",timestamp:"1m ago"},{id:"3",type:"group",unread:!0,name:"Jacob Thompson",profileImageUrl:"/images/avatar-jacob-thompson.webp",timestamp:"1 day ago",groupName:"Chess Club",groupUrl:"#",joined:!0},{id:"4",type:"message",unread:!1,name:"Rizky Hasanuddin",profileImageUrl:"/images/avatar-rizky-hasanuddin.webp",timestamp:"5 days ago",messageText:"Hello, thanks for setting up the Chess Club. I've been a member for a few weeks now and I'm alreayd having lots of fun and improving my game."},{id:"5",type:"comment",unread:!1,name:"Kimberly Smith",profileImageUrl:"/images/avatar-kimberly-smith.webp",timestamp:"1 week ago",postImageUrl:"/images/image-chess.webp"},{id:"6",type:"react",unread:!1,name:"Nathan Peterson",profileImageUrl:"/images/avatar-nathan-peterson.webp",timestamp:"2 weeks ago",postTitle:"5 end-game strategies to increase your win rate",postUrl:"#"},{id:"7",type:"group",unread:!1,name:"Anna Kim",profileImageUrl:"/images/avatar-anna-kim.webp",timestamp:"2 weeks ago",groupName:"Chess Club",groupUrl:"#",joined:!1}]}},e,(()=>{const e={grid:document.querySelector(".noti-grid"),unreadCounter:document.querySelector(".container__number"),markAllRead:document.querySelector(".container__mark-read"),notis:[]};let t=null;function a(a){const n=m(a);var s;s=n,e.grid.appendChild(s),e.notis.push(n),a.unread&&n.addEventListener("click",(function(){if(t){const e=this.getAttribute("data-id");t(e)}}))}return{addNotifications:function(e){e.forEach((e=>{a(e)}))},addNotification:a,setUnreadCount:function(t){e.unreadCounter.textContent=t},markNotificationAsRead:function(t){e.notis.find((e=>(console.log(e),e.getAttribute("data-id")===t))).classList.remove("notification--unread")},addMarkAllClickHandler:function(t){e.markAllRead.addEventListener("click",t)},addNotiClickHandler:function(e){t=e}}})());c()})();